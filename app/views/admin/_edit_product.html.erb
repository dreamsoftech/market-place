<div id="product-<%= product.id %>" class="modal product_form" style="display: none">
  <%= simple_form_for product, url: product_path(product), html: {:method => :put, :class => 'form-horizontal' } do |p| %>
    <div class="modal-header">
      <a class="close" data-dismiss="modal">&#215;</a>
      <h3>Edit product</h3>
    </div>
    <div class="modal-body">
      <%= p.input :name, autofocus: true %>
      <%= p.input :product_type, collection: Product::PRODUCT_TYPE.map.with_index{|m, i| [m, i]} %>
      <%= p.input :session_type, collection: Product::SESSION_TYPE.map.with_index{|m, i| [m, i]} %>
      <%= p.input :price, placeholder: "Input Price", type: :number %>
      <%= p.input :session_length %>

      <div class="control-group product_cover" style="display:none">
        <%= p.label :cover, 'Cover', :class => 'control-label' %>
        <div class="controls">
          <img id="book_cover" src="/assets/blank_book_cover.jpg" style="width: 150px; border: 1px solid #999;">
          <h5>
            <a id="book_cover_link">Add Book Cover</a>
          </h5>
          <%= p.file_field :cover, style: "display: none;" %>
        </div>
      </div>
      <div class="control-group product_url" style="display:none">
        <%= p.label :book_url, 'Book Url', :class => 'control-label' %>
        <div class="controls">
          <%= p.file_field :book_url %>
        </div>
      </div>
      <div class="control-group">
        <%= p.label :description, 'Description', :class => 'control-label' %>
        <div class="controls">
          <%= p.text_area :description, :class => "description" %>
        </div>
      </div>
      <div class="controls form-inline">
        <%= p.submit "Save", :class => "btn btn-success" %>
        <a class="btn" data-dismiss="modal">Cancel</a>
      </div>
    </div>
  <% end %>
</div>

<script type="text/javascript">
$("#product-<%= product.id %> form").validate({
  rules: {
    "product[price]": {
      number: true
    },
    "product[session_length]": {
      number: true
    }
  }
});
</script>